{"ast":null,"code":"import { LOGIN_START, LOGIN_FAILED, LOGIN_SUCCESS, LOGOUT, SIGNUP_START, SIGNUP_FAILED, FETCH_ADS_START, FETCH_ADS_FAILED, FETCH_ADS_SUCCESS, FETCH_USER_INFO, FETCH_USER_SUCCESS, FETCH_USER_FAILED, FETCH_OWN_ADS_START, FETCH_OWN_ADS_FAILED, FETCH_OWN_ADS_SUCCESS, FETCH_ONE_ADS_START, FETCH_ONE_ADS_FAILED, FETCH_ONE_ADS_SUCCESS } from '../constants/action-types';\nimport service from '../../sevices/dataService';\nimport history from '../../router/history'; //Authentictae\n\nfunction loginStart() {\n  return {\n    type: LOGIN_START\n  };\n}\n\nfunction loginFailed() {\n  return {\n    type: LOGIN_FAILED\n  };\n}\n\nfunction loginSuccess(payload) {\n  return {\n    type: LOGIN_SUCCESS,\n    payload: payload\n  };\n}\n\nexport function logout() {\n  function _logout() {\n    return {\n      type: LOGOUT\n    };\n  }\n\n  return function (dispatch) {\n    service.logout();\n    dispatch(_logout());\n  };\n}\nexport function login(username, password) {\n  return function (dispatch) {\n    dispatch(loginStart());\n    service.login(username, password).then(function (success) {\n      dispatch(loginSuccess({\n        accessToken: success.data.accessToken,\n        userId: success.data.userId\n      }));\n      history.push('/');\n    }).catch(function (error) {\n      return dispatch(loginFailed({\n        error: error\n      }));\n    });\n  };\n} //Registration\n\nfunction signupStart() {\n  return {\n    type: SIGNUP_START\n  };\n}\n\nfunction signupFailed(payload) {\n  return {\n    type: SIGNUP_FAILED,\n    payload: payload\n  };\n}\n\nexport function signup(username, password) {\n  return function (dispatch) {\n    dispatch(signupStart());\n    service.register(username, password).then(function (data) {\n      dispatch(loginSuccess({\n        accessToken: data.data.accessToken,\n        userId: data.data.userId\n      }));\n      history.push('/');\n    }).catch(function (error) {\n      var _error$response = error.response,\n          data = _error$response.data,\n          status = _error$response.status;\n\n      if (status === 402) {\n        dispatch(signupFailed({\n          error: data.data.error.message\n        }));\n      } else {\n        dispatch(signupFailed({\n          error: \"An unknown error occured\"\n        }));\n      }\n    });\n  };\n} //Advertisement\n\nexport function fetchAdverstisements() {\n  return function (dispatch) {\n    dispatch(start());\n    service.getAllAdvertisements().then(function (data) {\n      return dispatch(success({\n        advertisements: data.data\n      }));\n    }).catch(function (error) {\n      return dispatch(failed({\n        error: error\n      }));\n    });\n  };\n\n  function start() {\n    return {\n      type: FETCH_ADS_START\n    };\n  }\n\n  function success(payload) {\n    return {\n      type: FETCH_ADS_SUCCESS,\n      payload: payload\n    };\n  }\n\n  function failed(payload) {\n    return {\n      type: FETCH_ADS_FAILED,\n      payload: payload\n    };\n  }\n}\nexport function getOwnAds() {\n  return function (dispatch) {\n    dispatch(start);\n    service.getOwnAdvertisement().then(function (data) {\n      return dispatch(success({\n        advertisements: data.data\n      }));\n    }).catch(function (error) {\n      return dispatch(failed({\n        error: error\n      }));\n    });\n  };\n\n  function start() {\n    return {\n      type: FETCH_OWN_ADS_START\n    };\n  }\n\n  function success(payload) {\n    return {\n      type: FETCH_OWN_ADS_SUCCESS,\n      payload: payload\n    };\n  }\n\n  function failed(payload) {\n    return {\n      type: FETCH_OWN_ADS_FAILED,\n      payload: payload\n    };\n  }\n}\nexport function getOneAd(id) {\n  return function (dispatch) {};\n} //User infos\n\nexport function getUserInfo() {\n  return function (dispatch) {\n    dispatch(start());\n    service.getUserInfo().then(function (resp) {\n      return dispatch(success({\n        data: resp.data\n      }));\n    }).catch(function (error) {\n      return dispatch(failed({\n        error: error\n      }));\n    });\n  };\n\n  function success(payload) {\n    return {\n      type: FETCH_USER_SUCCESS,\n      payload: payload\n    };\n  }\n\n  function failed(payload) {\n    return {\n      type: FETCH_USER_FAILED,\n      payload: payload\n    };\n  }\n\n  function start() {\n    return {\n      type: FETCH_USER_INFO\n    };\n  }\n}","map":{"version":3,"sources":["/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/src/redux/actions/index.js"],"names":["LOGIN_START","LOGIN_FAILED","LOGIN_SUCCESS","LOGOUT","SIGNUP_START","SIGNUP_FAILED","FETCH_ADS_START","FETCH_ADS_FAILED","FETCH_ADS_SUCCESS","FETCH_USER_INFO","FETCH_USER_SUCCESS","FETCH_USER_FAILED","FETCH_OWN_ADS_START","FETCH_OWN_ADS_FAILED","FETCH_OWN_ADS_SUCCESS","FETCH_ONE_ADS_START","FETCH_ONE_ADS_FAILED","FETCH_ONE_ADS_SUCCESS","service","history","loginStart","type","loginFailed","loginSuccess","payload","logout","_logout","dispatch","login","username","password","then","success","accessToken","data","userId","push","catch","error","signupStart","signupFailed","signup","register","response","status","message","fetchAdverstisements","start","getAllAdvertisements","advertisements","failed","getOwnAds","getOwnAdvertisement","getOneAd","id","getUserInfo","resp"],"mappings":"AAAA,SACEA,WADF,EAEEC,YAFF,EAGEC,aAHF,EAIEC,MAJF,EAKEC,YALF,EAMEC,aANF,EAOEC,eAPF,EAQEC,gBARF,EASEC,iBATF,EAUEC,eAVF,EAWEC,kBAXF,EAYEC,iBAZF,EAaEC,mBAbF,EAcEC,oBAdF,EAeEC,qBAfF,EAgBEC,mBAhBF,EAiBEC,oBAjBF,EAkBEC,qBAlBF,QAmBO,2BAnBP;AAoBA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,OAAP,MAAoB,sBAApB,C,CAEA;;AACA,SAASC,UAAT,GAAsB;AACpB,SAAO;AACLC,IAAAA,IAAI,EAAErB;AADD,GAAP;AAGD;;AAED,SAASsB,WAAT,GAAuB;AACrB,SAAO;AACLD,IAAAA,IAAI,EAAEpB;AADD,GAAP;AAGD;;AAED,SAASsB,YAAT,CAAsBC,OAAtB,EAA+B;AAC7B,SAAO;AACLH,IAAAA,IAAI,EAAEnB,aADD;AAELsB,IAAAA,OAAO,EAAPA;AAFK,GAAP;AAID;;AAED,OAAO,SAASC,MAAT,GAAkB;AACvB,WAASC,OAAT,GAAmB;AACjB,WAAO;AACLL,MAAAA,IAAI,EAAElB;AADD,KAAP;AAGD;;AAED,SAAO,UAASwB,QAAT,EAAmB;AACxBT,IAAAA,OAAO,CAACO,MAAR;AACAE,IAAAA,QAAQ,CAACD,OAAO,EAAR,CAAR;AACD,GAHD;AAID;AAED,OAAO,SAASE,KAAT,CAAeC,QAAf,EAAyBC,QAAzB,EAAmC;AACxC,SAAO,UAASH,QAAT,EAAmB;AACxBA,IAAAA,QAAQ,CAACP,UAAU,EAAX,CAAR;AACAF,IAAAA,OAAO,CAACU,KAAR,CAAcC,QAAd,EAAwBC,QAAxB,EACQC,IADR,CACa,UAAAC,OAAO,EAAI;AACdL,MAAAA,QAAQ,CAACJ,YAAY,CAAC;AACpBU,QAAAA,WAAW,EAAED,OAAO,CAACE,IAAR,CAAaD,WADN;AAEpBE,QAAAA,MAAM,EAAEH,OAAO,CAACE,IAAR,CAAaC;AAFD,OAAD,CAAb,CAAR;AAIAhB,MAAAA,OAAO,CAACiB,IAAR,CAAa,GAAb;AACD,KAPT,EAQQC,KARR,CAQc,UAAAC,KAAK;AAAA,aAAIX,QAAQ,CAACL,WAAW,CAAC;AAAEgB,QAAAA,KAAK,EAALA;AAAF,OAAD,CAAZ,CAAZ;AAAA,KARnB;AASD,GAXD;AAYD,C,CAED;;AACA,SAASC,WAAT,GAAuB;AACrB,SAAO;AACLlB,IAAAA,IAAI,EAAEjB;AADD,GAAP;AAGD;;AAED,SAASoC,YAAT,CAAsBhB,OAAtB,EAA+B;AAC7B,SAAO;AACLH,IAAAA,IAAI,EAAEhB,aADD;AAELmB,IAAAA,OAAO,EAAPA;AAFK,GAAP;AAID;;AAED,OAAO,SAASiB,MAAT,CAAgBZ,QAAhB,EAA0BC,QAA1B,EAAoC;AACzC,SAAO,UAASH,QAAT,EAAmB;AACxBA,IAAAA,QAAQ,CAACY,WAAW,EAAZ,CAAR;AACArB,IAAAA,OAAO,CAACwB,QAAR,CAAiBb,QAAjB,EAA2BC,QAA3B,EACQC,IADR,CACa,UAAAG,IAAI,EAAI;AACZP,MAAAA,QAAQ,CAACJ,YAAY,CAAC;AACrBU,QAAAA,WAAW,EAAEC,IAAI,CAACA,IAAL,CAAUD,WADF;AAErBE,QAAAA,MAAM,EAAED,IAAI,CAACA,IAAL,CAAUC;AAFG,OAAD,CAAb,CAAR;AAIAhB,MAAAA,OAAO,CAACiB,IAAR,CAAa,GAAb;AACA,KAPT,EAQQC,KARR,CAQc,UAAAC,KAAK,EAAI;AAAA,4BACYA,KAAK,CAACK,QADlB;AAAA,UACLT,IADK,mBACLA,IADK;AAAA,UACCU,MADD,mBACCA,MADD;;AAEb,UAAIA,MAAM,KAAK,GAAf,EAAoB;AAClBjB,QAAAA,QAAQ,CAACa,YAAY,CAAC;AAAEF,UAAAA,KAAK,EAAEJ,IAAI,CAACA,IAAL,CAAUI,KAAV,CAAgBO;AAAzB,SAAD,CAAb,CAAR;AACD,OAFD,MAEO;AACLlB,QAAAA,QAAQ,CAACa,YAAY,CAAC;AAAEF,UAAAA,KAAK,EAAE;AAAT,SAAD,CAAb,CAAR;AACD;AACF,KAfT;AAgBD,GAlBD;AAmBD,C,CAED;;AACA,OAAO,SAASQ,oBAAT,GAAgC;AACrC,SAAO,UAASnB,QAAT,EAAmB;AACxBA,IAAAA,QAAQ,CAACoB,KAAK,EAAN,CAAR;AACA7B,IAAAA,OAAO,CAAC8B,oBAAR,GACMjB,IADN,CACW,UAAAG,IAAI;AAAA,aAAIP,QAAQ,CAACK,OAAO,CAAC;AAAEiB,QAAAA,cAAc,EAAEf,IAAI,CAACA;AAAvB,OAAD,CAAR,CAAZ;AAAA,KADf,EAEMG,KAFN,CAEY,UAAAC,KAAK;AAAA,aAAIX,QAAQ,CAACuB,MAAM,CAAC;AAAEZ,QAAAA,KAAK,EAALA;AAAF,OAAD,CAAP,CAAZ;AAAA,KAFjB;AAGD,GALD;;AAOA,WAASS,KAAT,GAAiB;AACf,WAAO;AACL1B,MAAAA,IAAI,EAAEf;AADD,KAAP;AAGD;;AAED,WAAS0B,OAAT,CAAiBR,OAAjB,EAA0B;AACxB,WAAO;AACLH,MAAAA,IAAI,EAAEb,iBADD;AAELgB,MAAAA,OAAO,EAAPA;AAFK,KAAP;AAID;;AAED,WAAS0B,MAAT,CAAgB1B,OAAhB,EAAyB;AACvB,WAAO;AACLH,MAAAA,IAAI,EAAEd,gBADD;AAELiB,MAAAA,OAAO,EAAPA;AAFK,KAAP;AAID;AACF;AAED,OAAO,SAAS2B,SAAT,GAAqB;AAC1B,SAAO,UAASxB,QAAT,EAAmB;AACxBA,IAAAA,QAAQ,CAACoB,KAAD,CAAR;AACA7B,IAAAA,OAAO,CAACkC,mBAAR,GACQrB,IADR,CACa,UAAAG,IAAI;AAAA,aAAIP,QAAQ,CAACK,OAAO,CAAC;AAAEiB,QAAAA,cAAc,EAAEf,IAAI,CAACA;AAAvB,OAAD,CAAR,CAAZ;AAAA,KADjB,EAEQG,KAFR,CAEc,UAAAC,KAAK;AAAA,aAAIX,QAAQ,CAACuB,MAAM,CAAC;AAAEZ,QAAAA,KAAK,EAALA;AAAF,OAAD,CAAP,CAAZ;AAAA,KAFnB;AAGD,GALD;;AAOA,WAASS,KAAT,GAAiB;AACf,WAAO;AACL1B,MAAAA,IAAI,EAAET;AADD,KAAP;AAGD;;AAED,WAASoB,OAAT,CAAiBR,OAAjB,EAA0B;AACxB,WAAO;AACLH,MAAAA,IAAI,EAAEP,qBADD;AAELU,MAAAA,OAAO,EAAPA;AAFK,KAAP;AAID;;AAED,WAAS0B,MAAT,CAAgB1B,OAAhB,EAAyB;AACvB,WAAO;AACLH,MAAAA,IAAI,EAAER,oBADD;AAELW,MAAAA,OAAO,EAAPA;AAFK,KAAP;AAID;AACF;AAED,OAAO,SAAS6B,QAAT,CAAkBC,EAAlB,EAAsB;AAC3B,SAAO,UAAS3B,QAAT,EAAmB,CAEzB,CAFD;AAGD,C,CAED;;AACA,OAAO,SAAS4B,WAAT,GAAuB;AAC5B,SAAO,UAAS5B,QAAT,EAAmB;AACxBA,IAAAA,QAAQ,CAACoB,KAAK,EAAN,CAAR;AACA7B,IAAAA,OAAO,CAACqC,WAAR,GACQxB,IADR,CACa,UAAAyB,IAAI;AAAA,aAAI7B,QAAQ,CAACK,OAAO,CAAC;AAAEE,QAAAA,IAAI,EAAEsB,IAAI,CAACtB;AAAb,OAAD,CAAR,CAAZ;AAAA,KADjB,EAEQG,KAFR,CAEc,UAAAC,KAAK;AAAA,aAAIX,QAAQ,CAACuB,MAAM,CAAC;AAAEZ,QAAAA,KAAK,EAALA;AAAF,OAAD,CAAP,CAAZ;AAAA,KAFnB;AAGD,GALD;;AAOA,WAASN,OAAT,CAAiBR,OAAjB,EAA0B;AACxB,WAAO;AACLH,MAAAA,IAAI,EAAEX,kBADD;AAELc,MAAAA,OAAO,EAAPA;AAFK,KAAP;AAID;;AAED,WAAS0B,MAAT,CAAgB1B,OAAhB,EAAyB;AACvB,WAAO;AACLH,MAAAA,IAAI,EAAEV,iBADD;AAELa,MAAAA,OAAO,EAAPA;AAFK,KAAP;AAID;;AAED,WAASuB,KAAT,GAAiB;AACf,WAAO;AACL1B,MAAAA,IAAI,EAAEZ;AADD,KAAP;AAGD;AACF","sourcesContent":["import {\n  LOGIN_START,\n  LOGIN_FAILED,\n  LOGIN_SUCCESS,\n  LOGOUT,\n  SIGNUP_START,\n  SIGNUP_FAILED,\n  FETCH_ADS_START,\n  FETCH_ADS_FAILED,\n  FETCH_ADS_SUCCESS,\n  FETCH_USER_INFO,\n  FETCH_USER_SUCCESS,\n  FETCH_USER_FAILED,\n  FETCH_OWN_ADS_START,\n  FETCH_OWN_ADS_FAILED,\n  FETCH_OWN_ADS_SUCCESS,\n  FETCH_ONE_ADS_START,\n  FETCH_ONE_ADS_FAILED,\n  FETCH_ONE_ADS_SUCCESS\n} from '../constants/action-types'\nimport service from '../../sevices/dataService'\nimport history from '../../router/history'\n\n//Authentictae\nfunction loginStart() {\n  return {\n    type: LOGIN_START\n  }\n}\n\nfunction loginFailed() {\n  return {\n    type: LOGIN_FAILED\n  }\n}\n\nfunction loginSuccess(payload) {\n  return {\n    type: LOGIN_SUCCESS,\n    payload\n  }\n}\n\nexport function logout() {\n  function _logout() {\n    return {\n      type: LOGOUT\n    }\n  }\n\n  return function(dispatch) {\n    service.logout()\n    dispatch(_logout())\n  }\n}\n\nexport function login(username, password) {\n  return function(dispatch) {\n    dispatch(loginStart())\n    service.login(username, password)\n           .then(success => {\n              dispatch(loginSuccess({ \n                accessToken: success.data.accessToken,\n                userId: success.data.userId \n              })) \n              history.push('/')\n            })\n           .catch(error => dispatch(loginFailed({ error })))\n  }\n}\n\n//Registration\nfunction signupStart() {\n  return {\n    type: SIGNUP_START\n  }\n}\n\nfunction signupFailed(payload) {\n  return {\n    type: SIGNUP_FAILED,\n    payload\n  }\n}\n\nexport function signup(username, password) {\n  return function(dispatch) {\n    dispatch(signupStart())\n    service.register(username, password)\n           .then(data => { \n             dispatch(loginSuccess({\n              accessToken: data.data.accessToken,\n              userId: data.data.userId\n             }))\n             history.push('/')\n            })\n           .catch(error => {\n              const { data, status } = error.response\n              if (status === 402) {\n                dispatch(signupFailed({ error: data.data.error.message }))\n              } else {\n                dispatch(signupFailed({ error: \"An unknown error occured\" }))\n              }\n            })\n  }\n}\n\n//Advertisement\nexport function fetchAdverstisements() {\n  return function(dispatch) {\n    dispatch(start())\n    service.getAllAdvertisements()\n         .then(data => dispatch(success({ advertisements: data.data })))\n         .catch(error => dispatch(failed({ error })))\n  } \n  \n  function start() {\n    return {\n      type: FETCH_ADS_START\n    }\n  }\n\n  function success(payload) {\n    return {\n      type: FETCH_ADS_SUCCESS,\n      payload\n    }\n  }\n\n  function failed(payload) {\n    return {\n      type: FETCH_ADS_FAILED,\n      payload\n    }\n  }\n}\n\nexport function getOwnAds() {\n  return function(dispatch) {\n    dispatch(start)\n    service.getOwnAdvertisement()\n           .then(data => dispatch(success({ advertisements: data.data })))\n           .catch(error => dispatch(failed({ error })))\n  }\n\n  function start() {\n    return {\n      type: FETCH_OWN_ADS_START\n    }\n  }\n\n  function success(payload) {\n    return {\n      type: FETCH_OWN_ADS_SUCCESS,\n      payload\n    }\n  }\n\n  function failed(payload) {\n    return {\n      type: FETCH_OWN_ADS_FAILED,\n      payload\n    }\n  }\n}\n\nexport function getOneAd(id) {\n  return function(dispatch) {\n\n  }\n}\n\n//User infos\nexport function getUserInfo() {\n  return function(dispatch) {\n    dispatch(start())\n    service.getUserInfo()\n           .then(resp => dispatch(success({ data: resp.data })))\n           .catch(error => dispatch(failed({ error })))\n  }\n\n  function success(payload) {\n    return {\n      type: FETCH_USER_SUCCESS,\n      payload\n    }\n  }\n\n  function failed(payload) {\n    return {\n      type: FETCH_USER_FAILED,\n      payload\n    }\n  }\n\n  function start() {\n    return {\n      type: FETCH_USER_INFO\n    }\n  }\n}"]},"metadata":{},"sourceType":"module"}