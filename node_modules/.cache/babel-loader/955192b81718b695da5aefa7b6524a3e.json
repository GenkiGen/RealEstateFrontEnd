{"ast":null,"code":"import _classCallCheck from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/src/components/Project/AddProject.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport service from '../../sevices/dataService';\nimport ProjectForm from './ProjectForm';\n\nvar AddProject =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AddProject, _React$Component);\n\n  function AddProject(props) {\n    var _this;\n\n    _classCallCheck(this, AddProject);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddProject).call(this, props));\n    _this.onAdd = _this.onAdd.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleError = _this.handleError.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      submitted: false,\n      success: false,\n      error: null\n    };\n    return _this;\n  }\n\n  _createClass(AddProject, [{\n    key: \"onAdd\",\n    value: function onAdd(event) {\n      var _this2 = this;\n\n      var userId = this.props.userId;\n      event.preventDefault();\n      var formData = new FormData(event.target);\n      var project = {\n        title: formData.get(\"title\"),\n        type: formData.get(\"type\"),\n        ownerName: formData.get(\"ownerName\"),\n        size: formData.get(\"size\"),\n        startYear: formData.get(\"startYear\"),\n        endYear: formData.get(\"endYear\"),\n        userId: userId\n      };\n      service.addProject(project).then(function (resp) {\n        _this2.setState({\n          submitted: true,\n          success: true,\n          error: null\n        });\n      }).catch(function (error) {\n        return _this2.handleError(error);\n      });\n    }\n  }, {\n    key: \"handleError\",\n    value: function handleError(error) {\n      var _error$response = error.response,\n          data = _error$response.data,\n          status = _error$response.status;\n\n      if (status === 301) {\n        this.setState({\n          submitted: true,\n          success: false,\n          error: data.message\n        });\n      } else {\n        this.setState({\n          submitted: true,\n          success: false,\n          error: \"Unknown error occurred\"\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          submitted = _this$state.submitted,\n          error = _this$state.error,\n          success = _this$state.success;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"title has-text-white is-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"Add a project\"), submitted ? success ? React.createElement(\"h1\", {\n        className: \"title has-text-info is-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \"New project added\") : React.createElement(\"h1\", {\n        className: \"heading has-text-danger is-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, error) : null, React.createElement(ProjectForm, {\n        onSubmit: this.onAdd,\n        submitButton: \"Add project\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return AddProject;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    userId: state.auth.user\n  };\n};\n\nexport default connect(mapStateToProps)(AddProject);","map":{"version":3,"sources":["/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/src/components/Project/AddProject.js"],"names":["React","connect","service","ProjectForm","AddProject","props","onAdd","bind","handleError","state","submitted","success","error","event","userId","preventDefault","formData","FormData","target","project","title","get","type","ownerName","size","startYear","endYear","addProject","then","resp","setState","catch","response","data","status","message","Component","mapStateToProps","auth","user"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport service from '../../sevices/dataService'\nimport ProjectForm from './ProjectForm';\n\nclass AddProject extends React.Component {\n  constructor(props) {\n    super(props)\n    this.onAdd = this.onAdd.bind(this)\n    this.handleError = this.handleError.bind(this)\n    this.state = {\n      submitted: false,\n      success: false,\n      error: null\n    }\n  }\n\n  onAdd(event) {\n    const { userId } = this.props\n    event.preventDefault()\n    const formData = new FormData(event.target)\n    const project = {\n      title: formData.get(\"title\"),\n      type: formData.get(\"type\"),\n      ownerName: formData.get(\"ownerName\"),\n      size: formData.get(\"size\"),\n      startYear: formData.get(\"startYear\"),\n      endYear: formData.get(\"endYear\"),\n      userId: userId\n    }\n    service.addProject(project)\n          .then(resp => {\n            this.setState({\n              submitted: true,\n              success: true,\n              error: null\n            })\n          })\n          .catch(error => this.handleError(error))\n  }\n\n  handleError(error) {\n    const { data, status } = error.response\n    if (status === 301) {\n      this.setState({\n        submitted: true,\n        success: false,\n        error: data.message\n      })\n    } else {\n      this.setState({\n        submitted: true,\n        success: false,\n        error: \"Unknown error occurred\"\n      })\n    }\n  }\n\n  render() {\n    const { submitted, error, success } = this.state\n    return (\n      <React.Fragment>\n        <h1 className=\"title has-text-white is-3\">Add a project</h1>\n        {\n          submitted ? success ? <h1 className=\"title has-text-info is-3\">New project added</h1> : <h1 className=\"heading has-text-danger is-3\">{error}</h1> : null\n        }\n        <ProjectForm onSubmit={this.onAdd} submitButton={\"Add project\"}/>\n      </React.Fragment>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    userId: state.auth.user\n  }\n}\n\nexport default connect(mapStateToProps)(AddProject)"]},"metadata":{},"sourceType":"module"}