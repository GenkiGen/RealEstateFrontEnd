{"ast":null,"code":"import _objectSpread from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport axios from 'axios';\nimport auth from '../sevices/authService';\nimport history from '../router/history';\nvar url = \"http://103.130.212.103:9090\";\n\nfunction login(username, password) {\n  return new Promise(function (resolve, reject) {\n    axios.post('http://103.130.212.103:9090/authenticate', {\n      name: username,\n      password: password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (resp) {\n      return resp.data;\n    }).then(function (data) {\n      auth.login(data.data.accessToken);\n      return data;\n    }).then(function (data) {\n      return resolve(data);\n    }).catch(function (error) {\n      return handleResponse(error, reject);\n    });\n  });\n}\n\nfunction register(username, password) {\n  return new Promise(function (resolve, reject) {\n    axios.post('http://103.130.212.103:9090/users', {\n      name: username,\n      password: password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (resp) {\n      return resp.data;\n    }).then(function (data) {\n      auth.login(data.data.accessToken);\n      return data;\n    }).then(function (data) {\n      return resolve(data);\n    }).catch(function (error) {\n      reject(error);\n    });\n  });\n} //Advertisement\n\n\nfunction getAllAdvertisements(page, sort, filter) {\n  var filterObject = filter ? {\n    filter: filter.filter,\n    gte: filter.from,\n    lte: filter.to\n  } : {};\n  var sortObject = sort ? {\n    sort: sort.sort,\n    order: sort.order\n  } : {};\n  return new Promise(function (resolve, reject) {\n    axios.get('http://103.130.212.103:9090/advertisements', {\n      params: _objectSpread({\n        p: page\n      }, filterObject, sortObject)\n    }).then(function (resp) {\n      return resp.data;\n    }).then(function (data) {\n      return resolve(data);\n    }).catch(function (error) {\n      return reject(error);\n    });\n  });\n}\n\nfunction getOwnAdvertisement(page) {\n  return new Promise(function (resolve, reject) {\n    axios.get('http://103.130.212.103:9090/advertisements/me', {\n      params: {\n        p: page\n      },\n      headers: auth.getAuthHeader()\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return reject(error);\n    });\n  });\n}\n\nfunction getOneAdvertisement(id) {\n  return new Promise(function (resolve, reject) {\n    axios.get(\"http://103.130.212.103:9090/advertisements/\".concat(id), {\n      headers: auth.getAuthHeader()\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return handleResponse(error, reject);\n    });\n  });\n}\n\nfunction deleteAd(_id) {\n  return new Promise(function (resolve, reject) {\n    axios.delete('http://103.130.212.103:9090/advertisements', {\n      headers: auth.getAuthHeader(),\n      data: {\n        _id: _id\n      }\n    }).then(function (data) {\n      return resolve(data.message);\n    }).catch(function (error) {\n      return reject(error);\n    });\n  });\n}\n\nfunction addAdvertisement(advertisement) {\n  return new Promise(function (resolve, reject) {\n    axios.post('http://103.130.212.103:9090/advertisements', advertisement, {\n      headers: _objectSpread({\n        'Content-Type': 'application/json'\n      }, auth.getAuthHeader())\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return reject(error);\n    });\n  });\n}\n\nfunction updateAdvertisement(advertisement) {\n  return new Promise(function (resolve, reject) {\n    axios.put('http://103.130.212.103:9090/advertisements', advertisement, {\n      headers: _objectSpread({\n        'Content-Type': 'application/json'\n      }, auth.getAuthHeader())\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return reject(error);\n    });\n  });\n} //User\n\n\nfunction getUserInfo() {\n  return new Promise(function (resolve, reject) {\n    axios.get('http://103.130.212.103:9090/users/me', {\n      headers: auth.getAuthHeader()\n    }).then(function (resp) {\n      resolve(resp.data);\n    }).catch(function (error) {\n      return handleResponse(error, reject);\n    });\n  });\n}\n\nfunction logout() {\n  auth.logout();\n  history.push('/login');\n} //Projects\n\n\nfunction addProject(project) {\n  return new Promise(function (resolve, reject) {\n    axios.post('http://103.130.212.103:9090/projects', project, {\n      headers: _objectSpread({\n        \"Content-Type\": \"application/json\"\n      }, auth.getAuthHeader())\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return handleResponse(error, reject);\n    });\n  });\n}\n\nfunction fetchOwnProjects(page) {\n  return new Promise(function (resolve, reject) {\n    axios.get(\"http://103.130.212.103:9090/projects/me\", {\n      headers: auth.getAuthHeader(),\n      params: {\n        page: page\n      }\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return handleResponse(error, reject);\n    });\n  });\n}\n\nfunction updateProject(projectId, update) {\n  return new Promise(function (resolve, reject) {\n    axios.put(\"http://103.130.212.103:9090/projects/\".concat(projectId), update, {\n      headers: _objectSpread({\n        'Content-Type': 'application/json'\n      }, auth.getAuthHeader())\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return handleResponse(error, reject);\n    });\n  });\n}\n\nfunction fetchOneProject(projectId) {\n  return new Promise(function (resolve, reject) {\n    axios.get(\"http://103.130.212.103:9090/projects/\".concat(projectId), {\n      headers: auth.getAuthHeader()\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return handleResponse(error, reject);\n    });\n  });\n}\n\nfunction addAdToProject(projectId, adId) {\n  return new Promise(function (resolve, reject) {\n    axios.post(\"http://103.130.212.103:9090/projects/\".concat(projectId, \"/addAdvertisement\"), {\n      adId: adId\n    }, {\n      headers: _objectSpread({\n        'Content-Type': 'application/json'\n      }, auth.getAuthHeader())\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return handleResponse(error, reject);\n    });\n  });\n}\n\nfunction removeAdFromProject(projectId, adId) {\n  return new Promise(function (resolve, reject) {\n    axios.delete(\"http://103.130.212.103:9090/projects/\".concat(projectId, \"/removeAdvertisement\"), {\n      headers: _objectSpread({\n        'Content-Type': 'application/json'\n      }, auth.getAuthHeader()),\n      data: {\n        adId: adId\n      }\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return handleResponse(error, reject);\n    });\n  });\n}\n\nfunction removeProject(projectId) {\n  return new Promise(function (resolve, reject) {\n    axios.delete(\"http://103.130.212.103:9090/projects/\".concat(projectId), {\n      headers: auth.getAuthHeader()\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return handleResponse(error, reject);\n    });\n  });\n}\n\nfunction handleResponse(error, reject) {\n  console.log(error);\n  var status = error.response.status;\n\n  if (status === 302) {\n    logout();\n  } else {\n    reject(error);\n  }\n}\n\nexport default {\n  login: login,\n  logout: logout,\n  register: register,\n  getAllAdvertisements: getAllAdvertisements,\n  getOwnAdvertisement: getOwnAdvertisement,\n  getOneAdvertisement: getOneAdvertisement,\n  deleteAd: deleteAd,\n  addAdvertisement: addAdvertisement,\n  removeAdFromProject: removeAdFromProject,\n  updateAdvertisement: updateAdvertisement,\n  addAdToProject: addAdToProject,\n  fetchOwnProjects: fetchOwnProjects,\n  fetchOneProject: fetchOneProject,\n  removeProject: removeProject,\n  updateProject: updateProject,\n  addProject: addProject,\n  getUserInfo: getUserInfo\n};","map":{"version":3,"sources":["/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/src/sevices/dataService.js"],"names":["axios","auth","history","url","login","username","password","Promise","resolve","reject","post","name","headers","then","resp","data","accessToken","catch","error","handleResponse","register","getAllAdvertisements","page","sort","filter","filterObject","gte","from","lte","to","sortObject","order","get","params","p","getOwnAdvertisement","getAuthHeader","getOneAdvertisement","id","deleteAd","_id","delete","message","addAdvertisement","advertisement","updateAdvertisement","put","getUserInfo","logout","push","addProject","project","fetchOwnProjects","updateProject","projectId","update","fetchOneProject","addAdToProject","adId","removeAdFromProject","removeProject","console","log","status","response"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport auth from '../sevices/authService'\nimport history from '../router/history'\n\nconst url = \"http://103.130.212.103:9090\"\n\nfunction login(username, password) {\n  return new Promise((resolve, reject) => {\n    axios.post('http://103.130.212.103:9090/authenticate', {\n      name: username,\n      password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n    .then(resp => resp.data)\n    .then(data => {\n      auth.login(data.data.accessToken)\n      return data\n    })\n    .then(data => resolve(data))\n    .catch(error => handleResponse(error, reject))\n  })\n}\n\nfunction register(username, password) {\n  return new Promise((resolve, reject) => {\n    axios.post('http://103.130.212.103:9090/users', {\n      name: username,\n      password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n    .then(resp => resp.data)\n    .then(data => {\n      auth.login(data.data.accessToken)\n      return data\n    })\n    .then(data => resolve(data))\n    .catch(error => { \n      reject(error) \n    })\n  })\n}\n\n\n//Advertisement\nfunction getAllAdvertisements(page, sort, filter) {\n  const filterObject = filter ? {\n    filter: filter.filter,\n    gte: filter.from,\n    lte: filter.to\n  } : {}\n  const sortObject = sort ? {\n    sort: sort.sort,\n    order: sort.order\n  } : {}\n  return new Promise((resolve, reject) => {\n    axios.get('http://103.130.212.103:9090/advertisements', {\n      params: { \n        p: page,\n        ...filterObject,\n        ...sortObject\n      }\n    })\n         .then(resp => resp.data)\n         .then(data => resolve(data))\n         .catch(error => reject(error))\n  })\n}\n\nfunction getOwnAdvertisement(page) {\n  return new Promise((resolve, reject) => {\n    axios.get('http://103.130.212.103:9090/advertisements/me', {\n      params: { p: page },\n      headers: auth.getAuthHeader()\n    })\n    .then(resp => resolve(resp.data))\n    .catch(error => reject(error))\n  })\n}\n\nfunction getOneAdvertisement(id) {\n  return new Promise((resolve, reject) => {\n    axios.get(`http://103.130.212.103:9090/advertisements/${id}`, {\n      headers: auth.getAuthHeader()\n    })\n    .then(resp => resolve(resp.data))\n    .catch(error => handleResponse(error, reject))\n  })\n}\n\nfunction deleteAd(_id) {\n  return new Promise((resolve, reject) => {\n    axios.delete('http://103.130.212.103:9090/advertisements', {\n      headers: auth.getAuthHeader(),\n      data: {\n        _id\n      }\n    })\n    .then(data => resolve(data.message))\n    .catch(error => reject(error))\n  })\n}\n\nfunction addAdvertisement(advertisement) {\n  return new Promise((resolve, reject) => {\n    axios.post('http://103.130.212.103:9090/advertisements', advertisement, {\n      headers: {\n        'Content-Type': 'application/json',\n        ...auth.getAuthHeader()\n      }\n    })\n    .then(resp => resolve(resp.data))\n    .catch(error => reject(error))\n  })\n}\n\nfunction updateAdvertisement(advertisement) {\n  return new Promise((resolve, reject) => {\n    axios.put('http://103.130.212.103:9090/advertisements', advertisement, {\n      headers: {\n        'Content-Type': 'application/json',\n        ...auth.getAuthHeader()\n      }\n    })\n    .then(resp => resolve(resp.data))\n    .catch(error => reject(error))\n  })\n}\n\n//User\nfunction getUserInfo() {\n  return new Promise((resolve, reject) => {\n    axios.get('http://103.130.212.103:9090/users/me', {\n      headers: auth.getAuthHeader()\n    })\n    .then(resp => { \n      resolve(resp.data) \n    })\n    .catch(error => handleResponse(error, reject))\n  })\n}\n\nfunction logout() {\n  auth.logout()\n  history.push('/login')\n}\n\n//Projects\nfunction addProject(project) {\n  return new Promise((resolve, reject) => {\n    axios.post('http://103.130.212.103:9090/projects', project, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...auth.getAuthHeader()\n    }\n  })\n  .then(resp => resolve(resp.data))\n  .catch(error => handleResponse(error, reject))\n  })\n}\n\nfunction fetchOwnProjects(page) {\n  return new Promise((resolve, reject) => {\n    axios.get(\"http://103.130.212.103:9090/projects/me\", {\n      headers: auth.getAuthHeader(),\n      params: {\n        page\n      }\n    })\n    .then(resp => resolve(resp.data))\n    .catch(error => handleResponse(error, reject))\n  })\n}\n\nfunction updateProject(projectId, update) {\n  return new Promise((resolve, reject) => {\n    axios.put(`http://103.130.212.103:9090/projects/${projectId}`, update, {\n      headers: {\n        'Content-Type': 'application/json',\n        ...auth.getAuthHeader()\n      }\n    })\n    .then(resp => resolve(resp.data))\n    .catch(error => handleResponse(error, reject))\n  })\n}\n\nfunction fetchOneProject(projectId) {\n  return new Promise((resolve, reject) => {\n    axios.get(`http://103.130.212.103:9090/projects/${projectId}`, {\n      headers: auth.getAuthHeader()\n    })\n    .then(resp => resolve(resp.data))\n    .catch(error => handleResponse(error, reject))\n  })\n}\n\nfunction addAdToProject(projectId, adId) {\n  return new Promise((resolve, reject) => {\n    axios.post(`http://103.130.212.103:9090/projects/${projectId}/addAdvertisement`, {\n      adId\n    }, \n    {\n      headers: {\n        'Content-Type': 'application/json',\n        ...auth.getAuthHeader()\n      }\n    })\n    .then(resp => resolve(resp.data))\n    .catch(error => handleResponse(error, reject))\n  })\n}\n\nfunction removeAdFromProject(projectId, adId) {\n  return new Promise((resolve, reject) => {\n    axios.delete(`http://103.130.212.103:9090/projects/${projectId}/removeAdvertisement`, {\n      headers: {\n        'Content-Type': 'application/json',\n        ...auth.getAuthHeader()\n      },\n      data: {\n        adId\n      }\n    })\n    .then(resp => resolve(resp.data))\n    .catch(error => handleResponse(error, reject))\n  })\n}\n\nfunction removeProject(projectId) {\n  return new Promise((resolve, reject) => {\n    axios.delete(`http://103.130.212.103:9090/projects/${projectId}`, {\n      headers: auth.getAuthHeader()\n    })\n    .then(resp => resolve(resp.data))\n    .catch(error => handleResponse(error, reject))\n  })\n}\n\nfunction handleResponse(error, reject) {\n  console.log(error)\n  const { status } = error.response\n  if (status === 302) {\n    logout()\n  } else {\n    reject(error)\n  }\n}\n\nexport default {\n  login,\n  logout,\n  register,\n  getAllAdvertisements,\n  getOwnAdvertisement,\n  getOneAdvertisement,\n  deleteAd,\n  addAdvertisement,\n  removeAdFromProject,\n  updateAdvertisement,\n  addAdToProject,\n  fetchOwnProjects,\n  fetchOneProject,\n  removeProject,\n  updateProject,\n  addProject,\n  getUserInfo\n}"]},"metadata":{},"sourceType":"module"}