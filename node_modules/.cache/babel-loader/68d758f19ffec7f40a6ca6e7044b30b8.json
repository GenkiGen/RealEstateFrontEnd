{"ast":null,"code":"import axios from 'axios';\nimport auth from '../sevices/authService';\nimport history from '../router/history';\n\nfunction login(username, password) {\n  return new Promise(function (resolve, reject) {\n    axios.post('http://localhost:8080/authenticate', {\n      name: username,\n      password: password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(handleResponse).then(function (data) {\n      auth.login(data.accessToken);\n      history.push('/');\n      return data;\n    }).then(function (data) {\n      return resolve(data);\n    }).catch(function (error) {\n      return reject(error);\n    });\n  });\n}\n\nfunction logout() {\n  auth.logout();\n}\n\nfunction handleResponse(resp) {\n  if (resp.status === 200) {\n    return resp.data;\n  } else {\n    auth.logout();\n    history.push('/login');\n  }\n}\n\nexport default {\n  login: login,\n  logout: logout\n};","map":{"version":3,"sources":["/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/src/sevices/dataService.js"],"names":["axios","auth","history","login","username","password","Promise","resolve","reject","post","name","headers","then","handleResponse","data","accessToken","push","catch","error","logout","resp","status"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,OAAP,MAAoB,mBAApB;;AAEA,SAASC,KAAT,CAAeC,QAAf,EAAyBC,QAAzB,EAAmC;AACjC,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCR,IAAAA,KAAK,CAACS,IAAN,CAAW,oCAAX,EAAiD;AAC/CC,MAAAA,IAAI,EAAEN,QADyC;AAE/CC,MAAAA,QAAQ,EAARA;AAF+C,KAAjD,EAGG;AACDM,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AADR,KAHH,EAQCC,IARD,CAQMC,cARN,EASCD,IATD,CASM,UAAAE,IAAI,EAAI;AACZb,MAAAA,IAAI,CAACE,KAAL,CAAWW,IAAI,CAACC,WAAhB;AACAb,MAAAA,OAAO,CAACc,IAAR,CAAa,GAAb;AACA,aAAOF,IAAP;AACD,KAbD,EAcCF,IAdD,CAcM,UAAAE,IAAI;AAAA,aAAIP,OAAO,CAACO,IAAD,CAAX;AAAA,KAdV,EAeCG,KAfD,CAeO,UAAAC,KAAK;AAAA,aAAIV,MAAM,CAACU,KAAD,CAAV;AAAA,KAfZ;AAgBD,GAjBM,CAAP;AAkBD;;AAED,SAASC,MAAT,GAAkB;AAChBlB,EAAAA,IAAI,CAACkB,MAAL;AACD;;AAED,SAASN,cAAT,CAAwBO,IAAxB,EAA8B;AAC5B,MAAIA,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AACvB,WAAOD,IAAI,CAACN,IAAZ;AACD,GAFD,MAEO;AACLb,IAAAA,IAAI,CAACkB,MAAL;AACAjB,IAAAA,OAAO,CAACc,IAAR,CAAa,QAAb;AACD;AACF;;AAED,eAAe;AACbb,EAAAA,KAAK,EAALA,KADa;AAEbgB,EAAAA,MAAM,EAANA;AAFa,CAAf","sourcesContent":["import axios from 'axios'\nimport auth from '../sevices/authService'\nimport history from '../router/history'\n\nfunction login(username, password) {\n  return new Promise((resolve, reject) => {\n    axios.post('http://localhost:8080/authenticate', {\n      name: username,\n      password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n    .then(handleResponse)\n    .then(data => {\n      auth.login(data.accessToken)\n      history.push('/')\n      return data\n    })\n    .then(data => resolve(data))\n    .catch(error => reject(error))\n  })\n}\n\nfunction logout() {\n  auth.logout()\n}\n\nfunction handleResponse(resp) {\n  if (resp.status === 200) {\n    return resp.data\n  } else {\n    auth.logout()\n    history.push('/login')\n  }\n}\n\nexport default {\n  login,\n  logout\n}"]},"metadata":{},"sourceType":"module"}