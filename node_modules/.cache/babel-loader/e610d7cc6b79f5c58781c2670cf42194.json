{"ast":null,"code":"import _objectSpread from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport axios from 'axios';\nimport auth from '../sevices/authService';\nimport history from '../router/history';\n\nfunction login(username, password) {\n  return new Promise(function (resolve, reject) {\n    axios.post('http://localhost:8080/authenticate', {\n      name: username,\n      password: password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (data) {\n      auth.login(data.data.accessToken);\n      return data;\n    }).then(function (data) {\n      return resolve(data);\n    }).catch(function (error) {\n      return handleResponse(error, reject);\n    });\n  });\n}\n\nfunction register(username, password) {\n  return new Promise(function (resolve, reject) {\n    axios.post('http://localhost:8080/users', {\n      name: username,\n      password: password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (resp) {\n      console.log(resp);\n      return resp.data;\n    }).then(function (data) {\n      console.log(data.data.accessToken);\n      auth.login(data.data.accessToken);\n      return data;\n    }).then(function (data) {\n      return resolve(data);\n    }).catch(function (error) {\n      reject(error);\n    });\n  });\n}\n\nfunction getAllAdvertisements() {\n  return new Promise(function (resolve, reject) {\n    axios.get('http://localhost:8080/advertisements').then(function (resp) {\n      return resp.data;\n    }).then(function (data) {\n      return resolve(data);\n    }).catch(function (error) {\n      return reject(error);\n    });\n  });\n}\n\nfunction getOwnAdvertisement() {\n  return new Promise(function (resolve, reject) {\n    axios.get('http://localhost:8080/advertisements/me', {\n      headers: auth.getAuthHeader()\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return reject(error);\n    });\n  });\n}\n\nfunction deleteAd(_id) {\n  return new Promise(function (resolve, reject) {\n    axios.delete('http://localhost:8080/advertisements', {\n      headers: auth.getAuthHeader(),\n      data: {\n        _id: _id\n      }\n    }).then(function (data) {\n      return resolve(data.message);\n    }).catch(function (error) {\n      return reject(error);\n    });\n  });\n}\n\nfunction addAdvertisement(advertisement) {\n  return new Promise(function (resolve, reject) {\n    axios.post('http://localhost:8080/advertisements', advertisement, {\n      headers: _objectSpread({\n        'Content-Type': 'application/json'\n      }, auth.getAuthHeader())\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return reject(error);\n    });\n  });\n}\n\nfunction updateAdvertisement(advertisement) {\n  return new Promise(function (resolve, reject) {\n    axios.put('http://localhost:8080/advertisements', advertisement, {\n      headers: _objectSpread({\n        'Content-Type': 'application/json'\n      }, auth.getAuthHeader())\n    }).then(function (resp) {\n      return resolve(resp.data);\n    }).catch(function (error) {\n      return reject(error);\n    });\n  });\n}\n\nfunction getUserInfo() {\n  return new Promise(function (resolve, reject) {\n    axios.get('http://localhost:8080/users/me', {\n      headers: auth.getAuthHeader()\n    }).then(function (resp) {\n      resolve(resp.data);\n    }).catch(function (error) {\n      return handleResponse(error, reject);\n    });\n  });\n}\n\nfunction logout() {\n  auth.logout();\n  history.push('/login');\n}\n\nfunction handleResponse(error, reject) {\n  var _error$response = error.response,\n      data = _error$response.data,\n      status = _error$response.status;\n  console.log(data);\n\n  if (status === 302) {\n    logout();\n  } else {\n    reject(error);\n  }\n}\n\nexport default {\n  login: login,\n  logout: logout,\n  register: register,\n  getAllAdvertisements: getAllAdvertisements,\n  getOwnAdvertisement: getOwnAdvertisement,\n  deleteAd: deleteAd,\n  addAdvertisement: addAdvertisement,\n  updateAdvertisement: updateAdvertisement,\n  getUserInfo: getUserInfo\n};","map":{"version":3,"sources":["/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/src/sevices/dataService.js"],"names":["axios","auth","history","login","username","password","Promise","resolve","reject","post","name","headers","then","data","accessToken","catch","error","handleResponse","register","resp","console","log","getAllAdvertisements","get","getOwnAdvertisement","getAuthHeader","deleteAd","_id","delete","message","addAdvertisement","advertisement","updateAdvertisement","put","getUserInfo","logout","push","response","status"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport auth from '../sevices/authService'\nimport history from '../router/history'\n\nfunction login(username, password) {\n  return new Promise((resolve, reject) => {\n    axios.post('http://localhost:8080/authenticate', {\n      name: username,\n      password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n    .then(data => {\n      auth.login(data.data.accessToken)\n      return data\n    })\n    .then(data => resolve(data))\n    .catch(error => handleResponse(error, reject))\n  })\n}\n\nfunction register(username, password) {\n  return new Promise((resolve, reject) => {\n    axios.post('http://localhost:8080/users', {\n      name: username,\n      password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n    .then(resp => { console.log(resp); return resp.data })\n    .then(data => {\n      console.log(data.data.accessToken)\n      auth.login(data.data.accessToken)\n      return data\n    })\n    .then(data => resolve(data))\n    .catch(error => { \n      reject(error) \n    })\n  })\n}\n\nfunction getAllAdvertisements() {\n  return new Promise((resolve, reject) => {\n    axios.get('http://localhost:8080/advertisements')\n         .then(resp => resp.data)\n         .then(data => resolve(data))\n         .catch(error => reject(error))\n  })\n}\n\nfunction getOwnAdvertisement() {\n  return new Promise((resolve, reject) => {\n    axios.get('http://localhost:8080/advertisements/me', {\n      headers: auth.getAuthHeader()\n    })\n    .then(resp => resolve(resp.data))\n    .catch(error => reject(error))\n  })\n}\n\nfunction deleteAd(_id) {\n  return new Promise((resolve, reject) => {\n    axios.delete('http://localhost:8080/advertisements', {\n      headers: auth.getAuthHeader(),\n      data: {\n        _id\n      }\n    })\n    .then(data => resolve(data.message))\n    .catch(error => reject(error))\n  })\n}\n\nfunction addAdvertisement(advertisement) {\n  return new Promise((resolve, reject) => {\n    axios.post('http://localhost:8080/advertisements', advertisement, {\n      headers: {\n        'Content-Type': 'application/json',\n        ...auth.getAuthHeader()\n      }\n    })\n    .then(resp => resolve(resp.data))\n    .catch(error => reject(error))\n  })\n}\n\nfunction updateAdvertisement(advertisement) {\n  return new Promise((resolve, reject) => {\n    axios.put('http://localhost:8080/advertisements', advertisement, {\n      headers: {\n        'Content-Type': 'application/json',\n        ...auth.getAuthHeader()\n      }\n    })\n    .then(resp => resolve(resp.data))\n    .catch(error => reject(error))\n  })\n}\n\nfunction getUserInfo() {\n  return new Promise((resolve, reject) => {\n    axios.get('http://localhost:8080/users/me', {\n      headers: auth.getAuthHeader()\n    })\n    .then(resp => { \n      resolve(resp.data) \n    })\n    .catch(error => handleResponse(error, reject))\n  })\n}\n\nfunction logout() {\n  auth.logout()\n  history.push('/login')\n}\n\nfunction handleResponse(error, reject) {\n  const { data, status } = error.response\n  console.log(data)\n  if (status === 302) {\n    logout()\n  } else {\n    reject(error)\n  }\n}\n\nexport default {\n  login,\n  logout,\n  register,\n  getAllAdvertisements,\n  getOwnAdvertisement,\n  deleteAd,\n  addAdvertisement,\n  updateAdvertisement,\n  getUserInfo\n}"]},"metadata":{},"sourceType":"module"}