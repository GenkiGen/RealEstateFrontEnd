{"ast":null,"code":"import _classCallCheck from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/src/components/Project/EditProject.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport service from '../../sevices/dataService';\nimport { getOwnAds, getOneAd } from '../../redux/actions';\nimport { fetchOneProject } from '../../redux/actions/project';\nimport ProjectForm from './ProjectForm';\nimport Pagination from '../Pagination/Pagination';\n\nvar EditProject =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EditProject, _React$Component);\n\n  function EditProject(props) {\n    var _this;\n\n    _classCallCheck(this, EditProject);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditProject).call(this, props));\n    _this.state = {\n      operationPending: false\n    };\n    _this.addAdver = _this.addAdver.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.removeAdver = _this.removeAdver.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.editProject = _this.editProject.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onPageClick = _this.onPageClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(EditProject, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.props.project) this.props.fetchOneProject(this.props.match.params.id);\n      if (this.props.ads.length === 0) this.props.getOwnAds();\n    }\n  }, {\n    key: \"editProject\",\n    value: function editProject(event) {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          userId = _this$props.userId,\n          project = _this$props.project;\n      event.preventDefault();\n      var formData = new FormData(event.target);\n      var update = {\n        title: formData.get(\"title\"),\n        type: formData.get(\"type\"),\n        ownerName: formData.get(\"ownerName\"),\n        size: formData.get(\"size\"),\n        startYear: formData.get(\"startYear\"),\n        endYear: formData.get(\"endYear\"),\n        userId: userId\n      };\n      service.updateProject(project._id, update).then(function (resp) {\n        alert('Success');\n\n        _this2.props.fetchOneProject(project._id);\n      }).catch(function (error) {\n        alert('Error');\n      });\n    }\n  }, {\n    key: \"addAdver\",\n    value: function addAdver(adId) {\n      var _this3 = this;\n\n      var project = this.props.project;\n      this.setState({\n        operationPending: true\n      });\n      service.addAdToProject(project._id, adId).then(function (_) {\n        _this3.setState({\n          operationPending: false\n        });\n\n        _this3.props.getOneAd(adId);\n      }).catch(function (error) {\n        _this3.setState({\n          operationPending: false\n        });\n      });\n    }\n  }, {\n    key: \"removeAdver\",\n    value: function removeAdver(adId) {\n      var _this4 = this;\n\n      var project = this.props.project;\n      this.setState({\n        operationPending: true\n      });\n      service.removeAdFromProject(project._id, adId).then(function (_) {\n        console.log(_);\n\n        _this4.setState({\n          operationPending: false\n        });\n\n        _this4.props.getOneAd(adId);\n      }).catch(function (error) {\n        var _error$response = error.response,\n            status = _error$response.status,\n            data = _error$response.data;\n\n        if (status === 400) {\n          alert(data.message);\n        } else {\n          alert(\"An unknown error has occured, please try again\");\n        }\n\n        _this4.setState({\n          operationPending: false\n        });\n      });\n    }\n  }, {\n    key: \"onPageClick\",\n    value: function onPageClick(page) {\n      this.props.getOwnAds(page);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var _this$props2 = this.props,\n          ads = _this$props2.ads,\n          project = _this$props2.project,\n          total = _this$props2.total;\n      var operationPending = this.state.operationPending;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"card-header-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Edit project's details\")), React.createElement(\"div\", {\n        className: \"card-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(ProjectForm, {\n        project: project,\n        submitButton: \"Update\",\n        onSubmit: this.editProject,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-header-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Edit project's advertisements\")), React.createElement(\"div\", {\n        className: \"card-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, ads.map(function (ad) {\n        return React.createElement(\"div\", {\n          key: ad._id,\n          className: \"card card-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, ad.title, operationPending ? React.createElement(\"button\", {\n          className: \"button is-loading is-primary is-pulled-right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, \"Add\") : ad.projectId ? ad.projectId === project._id ? React.createElement(\"button\", {\n          className: \"button is-danger is-pulled-right\",\n          onClick: function onClick() {\n            return _this5.removeAdver(ad._id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, \"Remove\") : React.createElement(\"button\", {\n          className: \"button is-pulled-right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, \"Unavailable\") : React.createElement(\"button\", {\n          className: \"button is-primary is-pulled-right\",\n          onClick: function onClick() {\n            return _this5.addAdver(ad._id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, \"Add\"));\n      })), React.createElement(Pagination, {\n        total: total,\n        per_page: 5,\n        onPageClick: this.onPageClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return EditProject;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    userId: state.auth.user,\n    project: state.projects.own.projects.find(function (proj) {\n      return proj._id === ownProps.match.params.id;\n    }),\n    ads: state.ownAdvertisements.ads,\n    total: state.ownAdvertisements.total,\n    isAdsError: state.ownAdvertisements.error,\n    isAdsLoading: state.ownAdvertisements.loading\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getOwnAds: getOwnAds,\n  getOneAd: getOneAd,\n  fetchOneProject: fetchOneProject\n})(EditProject);","map":{"version":3,"sources":["/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/src/components/Project/EditProject.js"],"names":["React","connect","service","getOwnAds","getOneAd","fetchOneProject","ProjectForm","Pagination","EditProject","props","state","operationPending","addAdver","bind","removeAdver","editProject","onPageClick","project","match","params","id","ads","length","event","userId","preventDefault","formData","FormData","target","update","title","get","type","ownerName","size","startYear","endYear","updateProject","_id","then","resp","alert","catch","error","adId","setState","addAdToProject","_","removeAdFromProject","console","log","response","status","data","message","page","total","map","ad","projectId","Component","mapStateToProps","ownProps","auth","user","projects","own","find","proj","ownAdvertisements","isAdsError","isAdsLoading","loading"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport service from '../../sevices/dataService'\nimport { getOwnAds, getOneAd } from '../../redux/actions'\nimport { fetchOneProject } from '../../redux/actions/project'\nimport ProjectForm from './ProjectForm'\nimport Pagination from '../Pagination/Pagination'\n\nclass EditProject extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      operationPending: false\n    }\n    this.addAdver = this.addAdver.bind(this)\n    this.removeAdver = this.removeAdver.bind(this)\n    this.editProject = this.editProject.bind(this)\n    this.onPageClick = this.onPageClick.bind(this)\n  }\n\n  componentDidMount() {\n    if (!this.props.project)\n      this.props.fetchOneProject(this.props.match.params.id)\n    if (this.props.ads.length === 0)\n      this.props.getOwnAds()\n  }\n\n  editProject(event) {\n    const { userId, project } = this.props\n    event.preventDefault()\n    const formData = new FormData(event.target)\n    const update = {\n      title: formData.get(\"title\"),\n      type: formData.get(\"type\"),\n      ownerName: formData.get(\"ownerName\"),\n      size: formData.get(\"size\"),\n      startYear: formData.get(\"startYear\"),\n      endYear: formData.get(\"endYear\"),\n      userId: userId\n    }\n    service.updateProject(project._id, update)\n          .then(resp => {\n            alert('Success')\n            this.props.fetchOneProject(project._id)\n          })\n          .catch(error => {\n            alert('Error')\n          })\n  }\n\n  addAdver(adId) {\n    const { project } = this.props\n    this.setState({\n      operationPending: true\n    })\n    service.addAdToProject(project._id, adId)\n          .then(_ => { \n            this.setState({\n              operationPending: false\n            })\n            this.props.getOneAd(adId)\n          })\n          .catch(error => { \n            this.setState({\n              operationPending: false\n            })\n          })\n  }\n\n  removeAdver(adId) {\n    const { project } = this.props\n    this.setState({\n      operationPending: true\n    })\n    service.removeAdFromProject(project._id , adId)\n          .then(_ => {\n            console.log(_)\n            this.setState({\n              operationPending: false\n            })\n            this.props.getOneAd(adId)\n          })\n          .catch(error => {\n            const { status, data } = error.response\n            if (status === 400) {\n              alert(data.message)\n            } else {\n              alert(\"An unknown error has occured, please try again\")\n            }\n            this.setState({\n              operationPending: false\n            }) \n          })\n  }\n\n  onPageClick(page) {\n    this.props.getOwnAds(page)\n  }\n\n  render() {\n    const { ads, project, total } = this.props\n    const { operationPending } = this.state\n    return (\n      <div>\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h1 className=\"card-header-title\">Edit project's details</h1>\n          </div>\n          <div className=\"card-content\">\n            <ProjectForm project={project} submitButton={\"Update\"} onSubmit={this.editProject}/>\n          </div>\n        </div>\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <div className=\"card-header-title\">Edit project's advertisements</div>\n          </div>\n\n          <div className=\"card-content\">\n          {\n            ads.map(ad => <div key={ad._id} className=\"card card-content\">\n              { ad.title }\n              {\n                operationPending ?\n                <button className=\"button is-loading is-primary is-pulled-right\">Add</button> :\n                ad.projectId ? \n                ad.projectId === project._id ? \n                <button className=\"button is-danger is-pulled-right\" onClick={() => this.removeAdver(ad._id)}>Remove</button> :\n                <button className=\"button is-pulled-right\">Unavailable</button> :\n                <button className=\"button is-primary is-pulled-right\" onClick={() => this.addAdver(ad._id)}>Add</button>\n              }\n              </div>)\n          }\n          </div>\n\n          <Pagination total={total} per_page={5} onPageClick={this.onPageClick} />\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    userId: state.auth.user,\n    project: state.projects.own.projects.find(\n      proj => proj._id === ownProps.match.params.id),\n    ads: state.ownAdvertisements.ads,\n    total: state.ownAdvertisements.total,\n    isAdsError: state.ownAdvertisements.error,\n    isAdsLoading: state.ownAdvertisements.loading\n  }\n}\n\nexport default connect(mapStateToProps, { getOwnAds, getOneAd, fetchOneProject })(EditProject)"]},"metadata":{},"sourceType":"module"}