{"ast":null,"code":"import _classCallCheck from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/src/components/Project/EditProject.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport service from '../../sevices/dataService';\nimport { getOwnAds, getOneAd } from '../../redux/actions';\n\nvar EditProject =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EditProject, _React$Component);\n\n  function EditProject(props) {\n    var _this;\n\n    _classCallCheck(this, EditProject);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditProject).call(this, props));\n    _this.state = {\n      operationPending: false\n    };\n    _this.addAdver = _this.addAdver.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.removeAdver = _this.removeAdver.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(EditProject, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.props.ad) {\n        this.props.getOwnAds();\n      }\n    }\n  }, {\n    key: \"addAdver\",\n    value: function addAdver(adId) {\n      var _this2 = this;\n\n      var project = this.props.project;\n      this.setState({\n        operationPending: true\n      });\n      service.addAdToProject(project._id, adId).then(function (_) {\n        _this2.setState({\n          operationPending: false\n        });\n\n        _this2.props.getOneAd(adId);\n      }).catch(function (error) {\n        _this2.setState({\n          operationPending: false\n        });\n      });\n    }\n  }, {\n    key: \"removeAdver\",\n    value: function removeAdver(adId) {\n      var _this3 = this;\n\n      var project = this.props.project;\n      this.setState({\n        operationPending: true\n      });\n      service.removeAdFromProject(project._id, adId).then(function (_) {\n        _this3.setState({\n          operationPending: false\n        });\n\n        _this3.props.getOneAd(adId);\n      }).catch(function (error) {\n        console.log(error);\n\n        _this3.setState({\n          operationPending: false\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props = this.props,\n          ads = _this$props.ads,\n          isAdsLoading = _this$props.isAdsLoading,\n          isAdsError = _this$props.isAdsError;\n      var operationPending = this.state.operationPending;\n      return React.createElement(React.Component, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"card-header-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"Edit your project details\")), React.createElement(\"div\", {\n        className: \"card-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-header-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Edit project's advertisements\")), React.createElement(\"div\", {\n        className: \"card-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, ads.map(function (ad) {\n        return React.createElement(\"div\", {\n          key: ad._id,\n          className: \"card card-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, ad.title, operationPending ? React.createElement(\"button\", {\n          className: \"button is-loading is-primary is-pulled-right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, \"Add\") : ad.projectId ? React.createElement(\"button\", {\n          className: \"button is-danger is-pulled-right\",\n          onClick: function onClick() {\n            return _this4.removeAdver(ad._id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, \"Remove\") : React.createElement(\"button\", {\n          className: \"button is-primary is-pulled-right\",\n          onClick: function onClick() {\n            return _this4.addAdver(ad._id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, \"Add\"));\n      }))));\n    }\n  }]);\n\n  return EditProject;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    project: state.projects.own.projects.find(function (proj) {\n      return proj._id === ownProps.match.params.id;\n    }),\n    ads: state.ownAdvertisements.ads.filter(function (ad) {\n      return !ad.projectId || ad.projectId === ownProps.match.params.id;\n    }),\n    isAdsError: state.ownAdvertisements.error,\n    isAdsLoading: state.ownAdvertisements.loading\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getOwnAds: getOwnAds,\n  getOneAd: getOneAd\n})(EditProject);","map":{"version":3,"sources":["/home/phat/Desktop/HTML/Learning Node/RealEstate/frontend/src/components/Project/EditProject.js"],"names":["React","connect","service","getOwnAds","getOneAd","EditProject","props","state","operationPending","addAdver","bind","removeAdver","ad","adId","project","setState","addAdToProject","_id","then","_","catch","error","removeAdFromProject","console","log","ads","isAdsLoading","isAdsError","map","title","projectId","Component","mapStateToProps","ownProps","projects","own","find","proj","match","params","id","ownAdvertisements","filter","loading"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport service from '../../sevices/dataService'\nimport { getOwnAds, getOneAd } from '../../redux/actions'\n\nclass EditProject extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      operationPending: false\n    }\n    this.addAdver = this.addAdver.bind(this)\n    this.removeAdver = this.removeAdver.bind(this)\n  }\n\n  componentDidMount() {\n    if (!this.props.ad) {\n      this.props.getOwnAds()\n    }\n  }\n\n  addAdver(adId) {\n    const { project } = this.props\n    this.setState({\n      operationPending: true\n    })\n    service.addAdToProject(project._id, adId)\n          .then(_ => { \n            this.setState({\n              operationPending: false\n            })\n            this.props.getOneAd(adId)\n          })\n          .catch(error => { \n            this.setState({\n              operationPending: false\n            })\n          })\n  }\n\n  removeAdver(adId) {\n    const { project } = this.props\n    this.setState({\n      operationPending: true\n    })\n    service.removeAdFromProject(project._id , adId)\n          .then(_ => {\n            this.setState({\n              operationPending: false\n            })\n            this.props.getOneAd(adId)\n          })\n          .catch(error => { \n            console.log(error)\n            this.setState({\n              operationPending: false\n            }) \n          })\n  }\n\n  render() {\n    const { ads, isAdsLoading, isAdsError } = this.props\n    const { operationPending } = this.state\n    return (\n      <React.Component>\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h1 className=\"card-header-title\">\n              Edit your project details\n            </h1>\n          </div>\n\n          <div className=\"card-content\">\n          \n          </div>\n        </div>\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <div className=\"card-header-title\">Edit project's advertisements</div>\n          </div>\n\n          <div className=\"card-content\">\n          {\n            ads.map(ad => <div key={ad._id} className=\"card card-content\">\n              { ad.title }\n              {\n                operationPending ?\n                <button className=\"button is-loading is-primary is-pulled-right\">Add</button> :\n                ad.projectId ? \n                <button className=\"button is-danger is-pulled-right\" onClick={() => this.removeAdver(ad._id)}>Remove</button> :\n                <button className=\"button is-primary is-pulled-right\" onClick={() => this.addAdver(ad._id)}>Add</button>\n              }\n              </div>)\n          }\n          </div>\n        </div>\n      </React.Component>\n    )\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    project: state.projects.own.projects.find(\n      proj => proj._id === ownProps.match.params.id),\n    ads: state.ownAdvertisements.ads.filter(ad => (!ad.projectId) || ad.projectId === ownProps.match.params.id),\n    isAdsError: state.ownAdvertisements.error,\n    isAdsLoading: state.ownAdvertisements.loading\n  }\n}\n\nexport default connect(mapStateToProps, { getOwnAds, getOneAd })(EditProject)"]},"metadata":{},"sourceType":"module"}